<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Wali Wheels</title>
    <link rel="stylesheet" href="css/admin.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header Glass -->
    <header class="header-glass">
        <nav class="nav-container">
            <div class="nav-brand">
                <span class="logo-glow">Wali Wheels</span>
                <span class="admin-badge">ADMIN</span>
            </div>
            
            <ul class="nav-menu">
                <li><a href="#" class="nav-link active" onclick="showSection('dashboard')">Dashboard</a></li>
                <li><a href="#" class="nav-link" onclick="showSection('cars')">Gestione Auto</a></li>
                <li><a href="#" class="nav-link" onclick="showSection('analytics')">Analytics</a></li>
                <li><a href="#" class="nav-link" onclick="showSection('settings')">Impostazioni</a></li>
            </ul>
            
            <div class="nav-actions">
                <div class="admin-user" onclick="toggleUserMenu()">
                    <div class="user-avatar">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                    </div>
                    <span class="user-name">Admin</span>
                </div>
                
                <div class="user-menu" id="userMenu">
                    <div class="user-info">
                        <div class="user-role">Amministratore</div>
                        <div class="user-email">admin@waliwheels.it</div>
                    </div>
                    <div class="menu-actions">
                        <button class="menu-item">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                            </svg>
                            Profilo
                        </button>
                        <button class="menu-item">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
                            </svg>
                            Impostazioni
                        </button>
                        <button class="menu-item">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                            </svg>
                            Logout
                        </button>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Admin Content -->
    <main class="admin-content">
        <!-- Hero Section -->
        <section class="admin-hero">
            <div class="hero-background">
                <div class="parallax-layer">
                    <div class="bokeh-lights"></div>
                </div>
                <div class="parallax-layer" data-speed="0.3">
                    <div class="aurora-gradient"></div>
                </div>
            </div>
            
            <div class="hero-content">
                <div class="hero-text">
                    <h1 class="hero-title">
                        <span class="title-line">Pannello</span>
                        <span class="title-accent">Amministrazione</span>
                    </h1>
                    <p class="hero-subtitle">
                        Gestisci il catalogo auto, monitora le performance e controlla tutti gli aspetti del tuo business automotive
                    </p>
                    
                    <div class="admin-stats">
                        <div class="stat-item">
                            <div class="stat-number" id="totalCars">0</div>
                            <div class="stat-label">Auto Totali</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="activeCars">0</div>
                            <div class="stat-label">Auto Attive</div>
                        </div>
                    </div>
                </div>
                
                <div class="hero-visual">
                    <div class="admin-dashboard-preview">
                        <div class="dashboard-mockup">
                            <div class="mockup-header">
                                <div class="mockup-dots">
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                </div>
                            </div>
                            <div class="mockup-content">
                                <div class="mockup-chart"></div>
                                <div class="mockup-data">
                                    <div class="data-row"></div>
                                    <div class="data-row"></div>
                                    <div class="data-row"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quick Actions -->
        <section class="quick-actions">
            <div class="actions-grid">
                <div class="action-card primary" onclick="openModal('addCarModal')">
                    <div class="action-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                        </svg>
                    </div>
                    <h3>Aggiungi Auto</h3>
                    <p>Inserisci una nuova auto nel catalogo con tutte le specifiche e immagini</p>
                    <div class="action-arrow">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
                        </svg>
                    </div>
                </div>
                
                <div class="action-card secondary" onclick="openModal('bulkUploadModal')">
                    <div class="action-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/>
                        </svg>
                    </div>
                    <h3>Upload Massivo</h3>
                    <p>Carica pi√π auto contemporaneamente tramite file CSV o Excel</p>
                    <div class="action-arrow">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
                        </svg>
                    </div>
                </div>
                
                <div class="action-card accent" onclick="showSection('analytics')">
                    <div class="action-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                        </svg>
                    </div>
                    <h3>Analytics</h3>
                    <p>Monitora le performance del catalogo e le statistiche di visualizzazione</p>
                    <div class="action-arrow">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
                        </svg>
                    </div>
                </div>
                
                <div class="action-card info" onclick="showSection('settings')">
                    <div class="action-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
                        </svg>
                    </div>
                    <h3>Impostazioni</h3>
                    <p>Configura le opzioni del sistema e personalizza l'esperienza amministrativa</p>
                    <div class="action-arrow">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
                        </svg>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cars Management -->
        <section class="cars-management" id="carsSection">
            <div class="section-header">
                <h2 class="section-title">Gestione Auto</h2>
                <p class="section-subtitle">Gestisci il catalogo auto, modifica le informazioni e monitora lo stato</p>
            </div>
            
            <div class="search-filters">
                <div class="search-box">
                    <svg class="search-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                    </svg>
                    <input type="text" class="search-input" placeholder="Cerca auto per marca, modello..." id="searchInput">
                </div>
                
                <div class="filter-buttons">
                    <button class="filter-btn active" onclick="filterCars('all')">Tutte</button>
                    <button class="filter-btn" onclick="filterCars('active')">Attive</button>
                    <button class="filter-btn" onclick="filterCars('draft')">Bozze</button>
                    <button class="filter-btn" onclick="filterCars('featured')">In Evidenza</button>
                </div>
            </div>
            
            <div class="cars-table-container">
                <table class="cars-table" id="carsTable">
                    <thead>
                        <tr>
                            <th>Auto</th>
                            <th>Prezzo</th>
                            <th>Tipo</th>
                            <th>Stato</th>
                            <th>Azioni</th>
                        </tr>
                    </thead>
                    <tbody id="carsTableBody">
                        <!-- Le auto verranno caricate dinamicamente -->
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <!-- Footer Glass -->
    <footer class="footer-glass">
        <div class="footer-content">
            <div class="footer-section">
                <h4>Wali Wheels</h4>
                <p>La tua concessionaria di fiducia per auto di lusso e prestazioni</p>
            </div>
            <div class="footer-section">
                <h4>Admin Panel</h4>
                <ul>
                    <li>Gestione Auto</li>
                    <li>Analytics</li>
                    <li>Impostazioni</li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Supporto</h4>
                <ul>
                    <li>Documentazione</li>
                    <li>FAQ</li>
                    <li>Contatti</li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Wali Wheels. Tutti i diritti riservati.</p>
            <p>Creato da Adil Fayyaz</p>
        </div>
    </footer>

    <!-- Modals -->
    
    <!-- Add Car Modal -->
    <div class="modal-overlay" id="addCarModal">
        <div class="modal-content add-car-modal">
            <div class="modal-header">
                <h2>
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                    Aggiungi Nuova Auto
                </h2>
                <button class="modal-close" onclick="closeModal('addCarModal')">&times;</button>
            </div>
            
            <form class="add-car-form" id="addCarForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="brand">üè∑Ô∏è Marca *</label>
                        <input type="text" id="brand" name="brand" class="form-input" placeholder="es. BMW, Mercedes, Audi" required>
                    </div>
                    <div class="form-group">
                        <label for="model">üöó Modello *</label>
                        <input type="text" id="model" name="model" class="form-input" placeholder="es. X5, Classe S, Q7" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="year">üìÖ Anno *</label>
                        <input type="number" id="year" name="year" class="form-input" placeholder="2024" min="1990" max="2030" required>
                    </div>
                    <div class="form-group">
                        <label for="price">üí∞ Prezzo *</label>
                        <input type="number" id="price" name="price" class="form-input" placeholder="50000" min="0" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="type">üöô Tipo *</label>
                        <select id="type" name="type" class="form-input" required>
                            <option value="">Seleziona tipo</option>
                            <option value="suv">SUV</option>
                            <option value="berlina">Berlina</option>
                            <option value="sportiva">Sportiva</option>
                            <option value="elettrica">Elettrica</option>
                            <option value="ibrida">Ibrida</option>
                            <option value="cabrio">Cabrio</option>
                            <option value="station-wagon">Station Wagon</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="color">üé® Colore</label>
                        <input type="text" id="color" name="color" class="form-input" placeholder="es. Bianco, Nero, Rosso">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="fuel">‚õΩ Carburante</label>
                        <select id="fuel" name="fuel" class="form-input">
                            <option value="">Seleziona carburante</option>
                            <option value="benzina">Benzina</option>
                            <option value="diesel">Diesel</option>
                            <option value="elettrico">Elettrico</option>
                            <option value="ibrido">Ibrido</option>
                            <option value="gpl">GPL</option>
                            <option value="metano">Metano</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="km">üõ£Ô∏è Chilometri</label>
                        <input type="number" id="km" name="km" class="form-input" placeholder="0" min="0">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="engine">üîß Cilindrata (cc)</label>
                        <input type="number" id="engine" name="engine" class="form-input" placeholder="2000" min="0">
                    </div>
                    <div class="form-group">
                        <label for="power">‚ö° Potenza (CV)</label>
                        <input type="number" id="power" name="power" class="form-input" placeholder="150" min="0">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="transmission">‚öôÔ∏è Trasmissione</label>
                        <select id="transmission" name="transmission" class="form-input">
                            <option value="">Seleziona trasmissione</option>
                            <option value="manuale">Manuale</option>
                            <option value="automatica">Automatica</option>
                            <option value="robotizzata">Robotizzata</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="doors">üö™ Numero Porte</label>
                        <input type="number" id="doors" name="doors" class="form-input" placeholder="5" min="2" max="6">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="seats">üí∫ Posti a Sedere</label>
                        <input type="number" id="seats" name="seats" class="form-input" placeholder="5" min="2" max="9">
                    </div>
                    <div class="form-group">
                        <label for="featured">‚≠ê In Evidenza</label>
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="featured" name="featured" class="form-checkbox">
                            <label for="featured" class="checkbox-label">Mostra in evidenza</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="description">üìù Descrizione</label>
                    <textarea id="description" name="description" class="form-input" rows="4" placeholder="Descrivi l'auto, le sue caratteristiche e i vantaggi..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="carImages">üñºÔ∏è Immagini Auto (Minimo 5)</label>
                    <div class="images-input-container">
                        <div class="images-grid" id="imagesGrid">
                            <div class="image-input-item">
                                <input type="url" class="image-url-input" placeholder="URL Immagine 1" data-index="0" required>
                                <div class="image-preview" id="preview0">
                                    <div class="placeholder-text">+</div>
                                </div>
                            </div>
                            <div class="image-input-item">
                                <input type="url" class="image-url-input" placeholder="URL Immagine 2" data-index="1" required>
                                <div class="image-preview" id="preview1">
                                    <div class="placeholder-text">+</div>
                                </div>
                            </div>
                            <div class="image-input-item">
                                <input type="url" class="image-url-input" placeholder="URL Immagine 3" data-index="2" required>
                                <div class="image-preview" id="preview2">
                                    <div class="placeholder-text">+</div>
                                </div>
                            </div>
                            <div class="image-input-item">
                                <input type="url" class="image-url-input" placeholder="URL Immagine 4" data-index="3" required>
                                <div class="image-preview" id="preview3">
                                    <div class="placeholder-text">+</div>
                                </div>
                            </div>
                            <div class="image-input-item">
                                <input type="url" class="image-url-input" placeholder="URL Immagine 5" data-index="4" required>
                                <div class="image-url-input" placeholder="URL Immagine 5" data-index="4" required>
                                <div class="image-preview" id="preview4">
                                    <div class="placeholder-text">+</div>
                                </div>
                            </div>
                        </div>
                        <div class="images-help">
                            <p>‚ö†Ô∏è <strong>Obbligatorio:</strong> Inserisci almeno 5 immagini per ogni auto</p>
                            <p>üí° <strong>Suggerimento:</strong> Usa immagini di alta qualit√† (800x600px o superiori)</p>
                        </div>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="filter-btn secondary" onclick="closeModal('addCarModal')">Annulla</button>
                    <button type="submit" class="filter-btn primary">Aggiungi Auto</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Bulk Upload Modal -->
    <div class="modal-overlay" id="bulkUploadModal">
        <div class="modal-content bulk-upload-modal">
            <div class="modal-header">
                <h2>
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/>
                    </svg>
                    Upload Massivo Auto
                </h2>
                <button class="modal-close" onclick="closeModal('bulkUploadModal')">&times;</button>
            </div>
            
            <div class="bulk-upload-content">
                <div class="upload-instructions">
                    <h3>Come procedere:</h3>
                    <ol>
                        <li>Prepara un file CSV o Excel con le colonne: Marca, Modello, Anno, Prezzo, Tipo, Colore, Carburante, Chilometri, Motore, Potenza, Trasmissione, Porte, Posti, Descrizione, Immagini (separate da virgola)</li>
                        <li>Assicurati che ogni auto abbia almeno 5 immagini valide</li>
                        <li>Carica il file e verifica l'anteprima</li>
                        <li>Conferma l'importazione</li>
                    </ol>
                </div>
                
                <div class="upload-actions">
                    <div class="file-upload">
                        <input type="file" class="file-input" id="bulkFileInput" accept=".csv,.xlsx,.xls">
                        <button type="button" class="filter-btn primary">Scegli File</button>
                    </div>
                    <button type="button" class="filter-btn secondary" onclick="processBulkUpload()">Processa File</button>
                </div>
                
                <div class="upload-preview" id="uploadPreview" style="display: none;">
                    <h4>Anteprima Importazione</h4>
                    <div class="preview-table" id="previewTable">
                        <!-- L'anteprima verr√† generata dinamicamente -->
                    </div>
                    <button type="button" class="filter-btn primary" onclick="confirmBulkUpload()">Conferma Importazione</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- JavaScript -->
    <script src="js/utils.js"></script>
    <script src="js/admin.js"></script>
    <script>
        // Funzioni globali per i modali
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        function showSection(sectionName) {
            if (window.adminPanel) {
                adminPanel.showSection(sectionName);
            }
        }

        function processBulkUpload() {
            const fileInput = document.getElementById('bulkFileInput');
            const file = fileInput.files[0];
            
            if (!file) {
                showToast('‚ö†Ô∏è Seleziona un file prima di procedere!', 'error');
                return;
            }
            
            // Simula processamento file
            showToast('‚è≥ Processamento file in corso...', 'info');
            
            setTimeout(() => {
                const preview = document.getElementById('uploadPreview');
                const previewTable = document.getElementById('previewTable');
                
                // Mock data per l'anteprima
                previewTable.innerHTML = `
                    <table class="preview-table-content">
                        <thead>
                            <tr>
                                <th>Marca</th>
                                <th>Modello</th>
                                <th>Anno</th>
                                <th>Prezzo</th>
                                <th>Stato</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>BMW</td>
                                <td>X5</td>
                                <td>2024</td>
                                <td>‚Ç¨85.000</td>
                                <td>‚úÖ Valido</td>
                            </tr>
                            <tr>
                                <td>Mercedes</td>
                                <td>Classe S</td>
                                <td>2023</td>
                                <td>‚Ç¨120.000</td>
                                <td>‚úÖ Valido</td>
                            </tr>
                            <tr>
                                <td>Audi</td>
                                <td>Q7</td>
                                <td>2024</td>
                                <td>‚Ç¨95.000</td>
                                <td>‚úÖ Valido</td>
                            </tr>
                        </tbody>
                    </table>
                `;
                
                preview.style.display = 'block';
                showToast('‚úÖ File processato con successo! Verifica l\'anteprima.', 'success');
            }, 2000);
        }

        function confirmBulkUpload() {
            showToast('‚úÖ Importazione completata! 3 auto aggiunte al catalogo.', 'success');
            closeModal('bulkUploadModal');
            
            // Reset form
            document.getElementById('bulkFileInput').value = '';
            document.getElementById('uploadPreview').style.display = 'none';
            
            // Aggiorna dashboard
            if (window.adminPanel) {
                adminPanel.renderDashboard();
                adminPanel.renderCarsTable();
            }
        }

        function confirmDeleteUser() {
            if (window.adminPanel && window.adminPanel.currentUserToDelete) {
                adminPanel.deleteUser(window.adminPanel.currentUserToDelete);
                closeModal('deleteUserModal');
                window.adminPanel.currentUserToDelete = null;
            }
        }

        function showToast(message, type = 'info') {
            const toastContainer = document.getElementById('toastContainer');
            if (!toastContainer) return;
            
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.innerHTML = `
                <div class="toast-content">
                    <div class="toast-message">${message}</div>
                    <button class="toast-close" onclick="this.parentElement.parentElement.remove()">&times;</button>
                </div>
            `;
            
            toastContainer.appendChild(toast);
            
            // Mostra il toast
            setTimeout(() => toast.classList.add('show'), 100);
            
            // Rimuovi automaticamente dopo 5 secondi
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 5000);
        }

        // Click fuori per chiudere modali
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                e.target.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });

        // Chiudi modali con ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const openModals = document.querySelectorAll('.modal-overlay[style*="flex"]');
                openModals.forEach(modal => {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                });
            }
        });

        // Gestione file input per bulk upload
        document.addEventListener('DOMContentLoaded', function() {
            const fileInput = document.getElementById('bulkFileInput');
            const chooseFileBtn = fileInput?.nextElementSibling;
            
            if (chooseFileBtn && fileInput) {
                chooseFileBtn.addEventListener('click', function() {
                    fileInput.click();
                });
                
                fileInput.addEventListener('change', function() {
                    if (this.files.length > 0) {
                        showToast(`üìÅ File selezionato: ${this.files[0].name}`, 'info');
                    }
                });
            }
        });
    </script>
</body>
</html>
